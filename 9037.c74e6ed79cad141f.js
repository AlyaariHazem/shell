"use strict";(self.webpackChunkstartupTemplate=self.webpackChunkstartupTemplate||[]).push([[9037],{9037:(V,c,i)=>{i.r(c),i.d(c,{LoginComponent:()=>_});var e=i(2950),v=i(7796),l=i(1014),g=i(3700),h=i(8220),f=i(6724),M=i(7232),S=i(5924),b=i(7496),I=i(668),N=i(8490),y=i(2274),p=i(7584),u=i(4866),j=i(774);const C={production:!1,logoPath:"logo.png",baseUrl:"",darkLogoPath:"logo.png",apiBaseUrl:"https://job-portal-rcxk.onrender.com",getUrl:(n,s="accounts")=>C.apiBaseUrl+"/api/"+s+"/"+n+"/",devToken:"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0SFhjOHhrMXRncVgyRmVUTlJTSzZqTlMyQ0VkdVVIQlRpNm5IWjR2ejk4In0.eyJleHAiOjE3NTk4MTUwMDQsImlhdCI6MTc1OTU4NDYwNCwianRpIjoiZjFiZGJiMWQtNmVkNS00MzEyLWE5YjMtZmY3NGEwNDA4MTEwIiwiaXNzIjoiaHR0cHM6Ly9vYXV0aC5ib2FyZC5vc2FuZWQuY29tL3JlYWxtcy82ZmE4NWY2NC01NzE3LTQ1NjItYjNmYy0yYzk2M2Y2NmFmYTYiLCJzdWIiOiJmZjhhODAxMC1jNzIyLTQ2YzYtYjlkNS03MzNiOWJlMmVjZGYiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJzYW5lZC1hcGktZ2F0ZXdheS1jbGllbnQiLCJzZXNzaW9uX3N0YXRlIjoiMzQ4NjI4ODItMzQ4My00Zjc4LWExMTUtNDM3ODg0ZjdjOTE4IiwiYWNyIjoiMSIsInNjb3BlIjoicm9sZXMgZW1haWwiLCJzaWQiOiIzNDg2Mjg4Mi0zNDgzLTRmNzgtYTExNS00Mzc4ODRmN2M5MTgiLCJyb2xlcyI6WyJzeXN0ZW1BZG1pbiIsIkhEX0FkbWluIiwiSFJfQWRtaW4iXSwiZW1haWwiOiJhaG1lZC5tYWRoZXJAZGF0YXRyYW5zLWl0LmNvbSJ9.XFmr7XC2Cu0xbrYByXbkrKKAv62brSbVAIEwWQ8RI3uRZv0Mze7Q60bcfGVidPZMuCKduZ9sj4F4b91fcO6uMfbGpxWqDpPY1tfjryQewxO3u72yRbwge1vCmfzqvWVoLzmt6JPzC7ON7mQhIIgLPSSMBsS813a4Z9Bd33jy0lltA2garvrDXesQl66jBrAWkAxuoAxowh6lWUVlxX6V0fvX90f0pfMBsWDxp-fRksGdKVNRkpL5O11YrX2qVWfc4UOSnJndGvaUZcZF_CTPx4tZoWYpIxBwd1XqJVKuRaKSmTZLrHV5emBOqEY0GH2Mmdt5iNxCSiU0zO4UQ_aleQ"};let E=(()=>{class n{router=(0,e.inject)(p.Router);http=(0,e.inject)(j.HttpClient);constructor(){}baseUrl=C.baseUrl;unwrap(){return t=>t.pipe((0,u.tap)(o=>{if(!o?.isSuccess)throw new Error(o?.errorMasseges?.[0]??"Request failed")}),(0,u.map)(o=>o.result))}get(t,o){return this.http.get(`${this.baseUrl}/${t}`,{params:o}).pipe(this.unwrap(),(0,u.catchError)(r=>(0,u.throwError)(()=>r)))}post(t,o,r){return this.http.post(`${this.baseUrl}/${t}`,o,r).pipe(this.unwrap(),(0,u.catchError)(m=>(0,u.throwError)(()=>m)))}put(t,o){return this.http.put(`${this.baseUrl}/${t}`,o).pipe(this.unwrap(),(0,u.catchError)(r=>(0,u.throwError)(()=>r)))}patch(t,o){return this.http.patch(`${this.baseUrl}/${t}`,o).pipe(this.unwrap(),(0,u.catchError)(r=>(0,u.throwError)(()=>r)))}delete(t){return this.http.delete(`${this.baseUrl}/${t}`).pipe(this.unwrap(),(0,u.catchError)(o=>(0,u.throwError)(()=>o)))}static \u0275fac=function(o){return new(o||n)};static \u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),x=(()=>{class n{_token=null;get token(){return this._token??localStorage.getItem("token")}setSession(t){this._token=t.token,localStorage.setItem("token",t.token),localStorage.setItem("managerName",t.managerName?.trim()||"Admin"),t.yearId&&localStorage.setItem("yearId",String(t.yearId)),t.schoolName&&localStorage.setItem("schoolName",t.schoolName),t.userName&&localStorage.setItem("userName",t.userName),t.schoolId&&localStorage.setItem("schoolId",String(t.schoolId))}clear(){this._token=null,["token","managerName","yearId","schoolName","userName","schoolId"].forEach(t=>localStorage.removeItem(t))}static \u0275fac=function(o){return new(o||n)};static \u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),A=(()=>{class n{api;auth;router=(0,e.inject)(p.Router);constructor(t,o){this.api=t,this.auth=o}login(t){return this.api.post("auth/login",t).pipe((0,u.tap)(o=>this.auth.setSession(o)))}register(t){return this.api.post("auth/register",t)}logout(){return this.api.post("auth/logout",{},{withCredentials:!0}).pipe((0,u.tap)(()=>{this.auth.clear(),this.router.navigate(["/"])}))}static \u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(E),e.\u0275\u0275inject(x))};static \u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const L=()=>({width:"100%"});function W(n,s){1&n&&(e.\u0275\u0275elementStart(0,"small",10),e.\u0275\u0275text(1,"\u064a\u062c\u0628 \u0625\u062f\u062e\u0627\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),e.\u0275\u0275elementEnd())}function O(n,s){1&n&&(e.\u0275\u0275elementStart(0,"small",10),e.\u0275\u0275text(1,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 3 \u0623\u062d\u0631\u0641 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644"),e.\u0275\u0275elementEnd())}function T(n,s){1&n&&(e.\u0275\u0275elementStart(0,"small",10),e.\u0275\u0275text(1,"\u0643\u0644\u0645\u0629 \u0627\u0644\u0633\u0631 \u0645\u0637\u0644\u0648\u0628\u0629"),e.\u0275\u0275elementEnd())}function F(n,s){1&n&&(e.\u0275\u0275elementStart(0,"small",10),e.\u0275\u0275text(1,"\u064a\u062c\u0628 \u0623\u0646 \u062a\u0643\u0648\u0646 \u0643\u0644\u0645\u0629 \u0627\u0644\u0633\u0631 \u0623\u0643\u0628\u0631 \u0645\u0646 3 \u0623\u062d\u0631\u0641"),e.\u0275\u0275elementEnd())}function k(n,s){1&n&&(e.\u0275\u0275elementStart(0,"small",10),e.\u0275\u0275text(1,"\u064a\u062c\u0628 \u0627\u062e\u062a\u064a\u0627\u0631 \u0646\u0648\u0639 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),e.\u0275\u0275elementEnd())}let _=(()=>{class n{authService=(0,e.inject)(A);messageService=(0,e.inject)(y.MessageService);router=(0,e.inject)(p.Router);isLoading=!1;visible=!1;formModel={user_type:"ADMIN",username:"",password:""};user_types=[{label:"Admin",value:"ADMIN"},{label:"\u0637\u0627\u0644\u0628",value:"STUDENT"},{label:"\u0645\u0639\u0644\u0645",value:"TEACHER"},{label:"\u0648\u0644\u064a \u0623\u0645\u0631",value:"GUARDIAN"},{label:"\u0645\u062f\u064a\u0631",value:"MANAGER"}];showDialog(){this.isLoading=!0,this.visible=!0}hideDialog(){this.visible=!1,this.isLoading=!1}login(t){t?.user_type?(this.router.navigateByUrl("/layout"),this.showDialog(),this.authService.login(t).subscribe({next:o=>{this.hideDialog(),o?.token?"ADMIN"===t.user_type?this.authService.router.navigateByUrl("admin"):(this.authService.router.navigateByUrl("school"),this.messageService.add({severity:"success",summary:"\u062a\u0645 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644",detail:`\u0645\u0631\u062d\u0628\u0627 \u0628\u0643 : ${o.managerName??""}`,life:4e3})):this.messageService.add({severity:"error",summary:"\u062e\u0637\u0623",detail:"\u0627\u0633\u062a\u062c\u0627\u0628\u0629 \u063a\u064a\u0631 \u0645\u062a\u0648\u0642\u0639\u0629 \u0645\u0646 \u0627\u0644\u062e\u0627\u062f\u0645",life:4e3})},error:()=>{this.hideDialog(),this.messageService.add({severity:"error",summary:"\u0641\u0634\u0644",detail:"\u0641\u0634\u0644 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644",life:4e3})}})):this.messageService.add({severity:"warn",summary:"\u062a\u062d\u0642\u0642",detail:"\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0646\u0648\u0639 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645",life:3500})}openRegisterDialog(){this.messageService.add({severity:"info",summary:"\u0645\u0639\u0644\u0648\u0645\u0629",detail:"\u0641\u062a\u062d \u0646\u0627\u0641\u0630\u0629 \u0627\u0644\u062a\u0633\u062c\u064a\u0644",life:3e3})}static \u0275fac=function(o){return new(o||n)};static \u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-login"]],features:[e.\u0275\u0275ProvidersFeature([y.MessageService])],decls:28,vars:16,consts:[["loginForm","ngForm"],["userName","ngModel"],["password","ngModel"],["user_type","ngModel"],[1,"form"],["dir","rtl",1,"p-fluid",3,"ngSubmit"],[1,"text-center",2,"margin-right","2rem"],[1,"input2"],["for","userName"],["id","userName","type","text","pInputText","","placeholder","\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645","autocomplete","username","name","userName","required","","minlength","3","maxlength","22",1,"w-full",3,"ngModelChange","ngModel"],[1,"p-error"],["for","password"],["inputId","password","placeholder","\u0643\u0644\u0645\u0629 \u0627\u0644\u0633\u0631","autocomplete","current-password","name","password","required","","styleClass","w-full",3,"ngModelChange","feedback","toggleMask","ngModel","minlength","maxlength","inputStyle"],["for","user_type"],["inputId","user_type","optionLabel","label","optionValue","value","placeholder","\u0627\u062e\u062a\u0631 \u0646\u0648\u0639 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645","name","user_type","required","","styleClass","w-full",3,"ngModelChange","options","ngModel"],["pButton","","type","submit","label","\u062a\u0633\u062c\u064a\u0644 \u062f\u062e\u0648\u0644",1,"p-button-success","btn-custom","mb-2","buttonSend","w-full",3,"disabled"],[1,"forgot-password",3,"click"]],template:function(o,r){if(1&o){const m=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",4)(1,"form",5,0),e.\u0275\u0275listener("ngSubmit",function(){return e.\u0275\u0275restoreView(m),e.\u0275\u0275resetView(r.login(r.formModel))}),e.\u0275\u0275elementStart(3,"h2",6),e.\u0275\u0275text(4,"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",7)(6,"label",8),e.\u0275\u0275text(7,"\u0625\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"input",9,1),e.\u0275\u0275twoWayListener("ngModelChange",function(a){return e.\u0275\u0275restoreView(m),e.\u0275\u0275twoWayBindingSet(r.formModel.userName,a)||(r.formModel.userName=a),e.\u0275\u0275resetView(a)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,W,2,0,"small",10)(11,O,2,0,"small",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",7)(13,"label",11),e.\u0275\u0275text(14,"\u0643\u0644\u0645\u0629 \u0627\u0644\u0633\u0631"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p-password",12,2),e.\u0275\u0275twoWayListener("ngModelChange",function(a){return e.\u0275\u0275restoreView(m),e.\u0275\u0275twoWayBindingSet(r.formModel.password,a)||(r.formModel.password=a),e.\u0275\u0275resetView(a)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(17,T,2,0,"small",10)(18,F,2,0,"small",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",7)(20,"label",13),e.\u0275\u0275text(21,"\u0646\u0648\u0639 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"p-dropdown",14,3),e.\u0275\u0275twoWayListener("ngModelChange",function(a){return e.\u0275\u0275restoreView(m),e.\u0275\u0275twoWayBindingSet(r.formModel.user_type,a)||(r.formModel.user_type=a),e.\u0275\u0275resetView(a)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(24,k,2,0,"small",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(25,"button",15),e.\u0275\u0275elementStart(26,"a",16),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(m),e.\u0275\u0275resetView(r.openRegisterDialog())}),e.\u0275\u0275text(27,"\u0647\u0644 \u0646\u0633\u064a\u062a \u0643\u0644\u0645\u0629 \u0627\u0644\u0633\u0631\u061f"),e.\u0275\u0275elementEnd()()()}if(2&o){const m=e.\u0275\u0275reference(2),d=e.\u0275\u0275reference(9),a=e.\u0275\u0275reference(16),w=e.\u0275\u0275reference(23);e.\u0275\u0275advance(8),e.\u0275\u0275twoWayProperty("ngModel",r.formModel.userName),e.\u0275\u0275advance(2),e.\u0275\u0275conditional(null!=d.errors&&d.errors.required?10:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(null!=d.errors&&d.errors.minlength?11:-1),e.\u0275\u0275advance(4),e.\u0275\u0275property("feedback",!1)("toggleMask",!0),e.\u0275\u0275twoWayProperty("ngModel",r.formModel.password),e.\u0275\u0275property("minlength",3)("maxlength",22)("inputStyle",e.\u0275\u0275pureFunction0(15,L)),e.\u0275\u0275advance(2),e.\u0275\u0275conditional(null!=a.errors&&a.errors.required?17:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(null!=a.errors&&a.errors.minlength?18:-1),e.\u0275\u0275advance(4),e.\u0275\u0275property("options",r.user_types),e.\u0275\u0275twoWayProperty("ngModel",r.formModel.user_type),e.\u0275\u0275advance(2),e.\u0275\u0275conditional(null!=w.errors&&w.errors.required?24:-1),e.\u0275\u0275advance(),e.\u0275\u0275property("disabled",m.invalid)}},dependencies:[v.CommonModule,l.FormsModule,l.\u0275NgNoValidate,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.RequiredValidator,l.MinLengthValidator,l.MaxLengthValidator,l.NgModel,l.NgForm,g.InputTextModule,g.InputText,h.PasswordModule,h.Password,f.DropdownModule,f.Dropdown,M.ButtonModule,M.ButtonDirective,S.MessageModule,b.ToastModule,I.DialogModule,N.ProgressSpinnerModule],styles:[".form[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background-color:#f0f2f5;padding:20px}.forgot-password[_ngcontent-%COMP%]{cursor:pointer}.toast-center-center[_ngcontent-%COMP%]{position:fixed;top:50%!important;left:50%!important;transform:translate(-50%,-50%)!important;margin:0!important;z-index:999999!important}form[_ngcontent-%COMP%]{width:100%;max-width:400px;background:#fff;padding:2rem;border-radius:8px;box-shadow:0 4px 12px #0000001a;direction:rtl}.input2[_ngcontent-%COMP%]{width:100%;margin-bottom:1.5rem}.input2[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:600}.p-error[_ngcontent-%COMP%]{display:block;color:#d32f2f;font-size:.9rem;font-weight:500;margin-top:.5rem}button[type=submit][_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1rem;font-weight:700;border:none;border-radius:4px;margin-top:1rem;transition:background-color .3s ease;text-transform:uppercase}.spinner-overlay[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:200px;background:#ffffffe6;border-radius:10px;padding:1rem}.loading-text[_ngcontent-%COMP%]{margin-top:1rem;font-size:1.2rem;color:#333;font-weight:500}a[_ngcontent-%COMP%]{display:block;text-align:center;margin-top:1rem;text-decoration:none;font-weight:700}a[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width: 600px){form[_ngcontent-%COMP%]{padding:1.5rem}}.btn-custom[_ngcontent-%COMP%]{background-color:#198754!important;color:#fff!important;border:1px solid #28a745!important;transition:all .3s ease}.btn-custom[_ngcontent-%COMP%]:hover{background-color:#21943c!important;border:1px solid #28a745!important}"]})}return n})()}}]);