"use strict";(self.webpackChunkstartupTemplate=self.webpackChunkstartupTemplate||[]).push([[6817],{6817:(R,c,l)=>{l.r(c),l.d(c,{LoginComponent:()=>O});var e=l(2950),w=l(7796),m=l(1014),g=l(3700),h=l(8220),f=l(6724),M=l(7232),I=l(5924),v=l(7496),b=l(668),N=l(8490),y=l(2274),u=l(4866);!function E(){const d=window.location.origin.split("://")[1].split(".");d.length>2&&d.slice(1).join(".")}();var T=l(774),p=l(7584);let j=(()=>{class n{http;router;baseUrl="";constructor(r,t){this.http=r,this.router=t}getRequest(r){return this.http.get(`${this.baseUrl}/${r}`).pipe((0,u.catchError)(t=>(console.error("HTTP GET error:",t),(0,u.throwError)(()=>t))))}getRequestByID(r,t,o){return this.http.get(`${this.baseUrl}/${r}/${t}/${o}`).pipe((0,u.catchError)(a=>(console.error("GET by ID error:",a),(0,u.throwError)(()=>a))))}postRequest(r,t){return this.http.post(`${this.baseUrl}/${r}`,t).pipe((0,u.catchError)(o=>(console.error("POST error:",o),(0,u.throwError)(()=>o))))}putRequest(r,t){return this.http.put(`${this.baseUrl}/${r}`,t).pipe((0,u.catchError)(o=>(console.error("PUT error:",o),(0,u.throwError)(()=>o))))}deleteRequest(r){return this.http.delete(`${this.baseUrl}/${r}`)}patchRequest(r,t){return this.http.patch(`${this.baseUrl}/${r}`,t).pipe((0,u.catchError)(o=>(console.error("PATCH error:",o),(0,u.throwError)(()=>o))))}putRequestWithToParms(r,t,o,a){return this.http.put(`${this.baseUrl}/${r}/${t}/${o}`,a).pipe((0,u.catchError)(i=>(console.error("PUT with 2 params error:",i),(0,u.throwError)(()=>i))))}uploadFile(r,t,o){const a=new FormData;return a.append("file",r),a.append("itemId",o.toString()),a.append("folderName",t.toString()),this.http.post(`${this.baseUrl}/File/uploadImage`,a).pipe((0,u.catchError)(i=>(console.error("Error uploading File:",i),(0,u.throwError)(()=>i))))}uploadFiles(r,t,o=0){const a=new FormData;return r.forEach(i=>a.append("files",i)),a.append("voucherID",o.toString()),a.append("studentId",t.toString()),this.http.post(`${this.baseUrl}/File/uploadFiles`,a).pipe((0,u.catchError)(i=>(console.error("Error uploading Files:",i),(0,u.throwError)(()=>i))))}static \u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(T.HttpClient),e.\u0275\u0275inject(p.Router))};static \u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),A=(()=>{class n{router;API=(0,e.inject)(j);constructor(r){this.router=r}login(r){return this.API.http.post(`${this.API.baseUrl}/auth/login`,r).pipe((0,u.tap)(t=>{t&&t.token&&localStorage.setItem("token",t.token),t.managerName&&localStorage.setItem("managerName",t.managerName),t.yearId&&localStorage.setItem("yearId",t.yearId)," "===t.managerName&&localStorage.setItem("managerName","Admin"),t.schoolName&&localStorage.setItem("schoolName",t.schoolName),t.userName&&localStorage.setItem("userName",t.userName),t.schoolId&&localStorage.setItem("schoolId",t.schoolId)}))}register(r){return this.API.http.post(`${this.API.baseUrl}/auth/register`,r,{responseType:"json"})}logout(){return this.API.http.post(`${this.API.baseUrl}/auth/logout`,{},{withCredentials:!0}).pipe((0,u.tap)(()=>{["token","managerName","yearId","schoolName","userName","schoolId"].forEach(r=>localStorage.removeItem(r)),this.router.navigate(["/"])}))}static \u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(p.Router))};static \u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const x=()=>({width:"100%"});function F(n,d){1&n&&(e.\u0275\u0275elementStart(0,"small",10),e.\u0275\u0275text(1,"\u064a\u062c\u0628 \u0625\u062f\u062e\u0627\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),e.\u0275\u0275elementEnd())}function W(n,d){1&n&&(e.\u0275\u0275elementStart(0,"small",10),e.\u0275\u0275text(1,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 3 \u0623\u062d\u0631\u0641 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644"),e.\u0275\u0275elementEnd())}function L(n,d){1&n&&(e.\u0275\u0275elementStart(0,"small",10),e.\u0275\u0275text(1,"\u0643\u0644\u0645\u0629 \u0627\u0644\u0633\u0631 \u0645\u0637\u0644\u0648\u0628\u0629"),e.\u0275\u0275elementEnd())}function P(n,d){1&n&&(e.\u0275\u0275elementStart(0,"small",10),e.\u0275\u0275text(1,"\u064a\u062c\u0628 \u0623\u0646 \u062a\u0643\u0648\u0646 \u0643\u0644\u0645\u0629 \u0627\u0644\u0633\u0631 \u0623\u0643\u0628\u0631 \u0645\u0646 3 \u0623\u062d\u0631\u0641"),e.\u0275\u0275elementEnd())}function D(n,d){1&n&&(e.\u0275\u0275elementStart(0,"small",10),e.\u0275\u0275text(1,"\u064a\u062c\u0628 \u0627\u062e\u062a\u064a\u0627\u0631 \u0646\u0648\u0639 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),e.\u0275\u0275elementEnd())}let O=(()=>{class n{authService=(0,e.inject)(A);messageService=(0,e.inject)(y.MessageService);router=(0,e.inject)(p.Router);isLoading=!1;visible=!1;formModel={userType:"ADMIN",username:"",password:""};userTypes=[{label:"Admin",value:"ADMIN"},{label:"\u0637\u0627\u0644\u0628",value:"STUDENT"},{label:"\u0645\u0639\u0644\u0645",value:"TEACHER"},{label:"\u0648\u0644\u064a \u0623\u0645\u0631",value:"GUARDIAN"},{label:"\u0645\u062f\u064a\u0631",value:"MANAGER"}];showDialog(){this.isLoading=!0,this.visible=!0}hideDialog(){this.visible=!1,this.isLoading=!1}login(r){r?.userType?(this.router.navigateByUrl("/layout"),this.showDialog(),this.authService.login(r).subscribe({next:t=>{this.hideDialog(),t?.token?"ADMIN"===r.userType?this.authService.router.navigateByUrl("admin"):(this.authService.router.navigateByUrl("school"),this.messageService.add({severity:"success",summary:"\u062a\u0645 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644",detail:`\u0645\u0631\u062d\u0628\u0627 \u0628\u0643 : ${t.managerName??""}`,life:4e3})):this.messageService.add({severity:"error",summary:"\u062e\u0637\u0623",detail:"\u0627\u0633\u062a\u062c\u0627\u0628\u0629 \u063a\u064a\u0631 \u0645\u062a\u0648\u0642\u0639\u0629 \u0645\u0646 \u0627\u0644\u062e\u0627\u062f\u0645",life:4e3})},error:()=>{this.hideDialog(),this.messageService.add({severity:"error",summary:"\u0641\u0634\u0644",detail:"\u0641\u0634\u0644 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644",life:4e3})}})):this.messageService.add({severity:"warn",summary:"\u062a\u062d\u0642\u0642",detail:"\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0646\u0648\u0639 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645",life:3500})}openRegisterDialog(){this.messageService.add({severity:"info",summary:"\u0645\u0639\u0644\u0648\u0645\u0629",detail:"\u0641\u062a\u062d \u0646\u0627\u0641\u0630\u0629 \u0627\u0644\u062a\u0633\u062c\u064a\u0644",life:3e3})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-login"]],features:[e.\u0275\u0275ProvidersFeature([y.MessageService])],decls:28,vars:16,consts:[["loginForm","ngForm"],["userName","ngModel"],["password","ngModel"],["userType","ngModel"],[1,"form"],["dir","rtl",1,"p-fluid",3,"ngSubmit"],[1,"text-center",2,"margin-right","2rem"],[1,"input2"],["for","userName"],["id","userName","type","text","pInputText","","placeholder","\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645","autocomplete","username","name","userName","required","","minlength","3","maxlength","22",1,"w-full",3,"ngModelChange","ngModel"],[1,"p-error"],["for","password"],["inputId","password","placeholder","\u0643\u0644\u0645\u0629 \u0627\u0644\u0633\u0631","autocomplete","current-password","name","password","required","","styleClass","w-full",3,"ngModelChange","feedback","toggleMask","ngModel","minlength","maxlength","inputStyle"],["for","userType"],["inputId","userType","optionLabel","label","optionValue","value","placeholder","\u0627\u062e\u062a\u0631 \u0646\u0648\u0639 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645","name","userType","required","","styleClass","w-full",3,"ngModelChange","options","ngModel"],["pButton","","type","submit","label","\u062a\u0633\u062c\u064a\u0644 \u062f\u062e\u0648\u0644",1,"p-button-success","btn-custom","mb-2","buttonSend","w-full",3,"disabled"],[1,"forgot-password",3,"click"]],template:function(t,o){if(1&t){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",4)(1,"form",5,0),e.\u0275\u0275listener("ngSubmit",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(o.login(o.formModel))}),e.\u0275\u0275elementStart(3,"h2",6),e.\u0275\u0275text(4,"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",7)(6,"label",8),e.\u0275\u0275text(7,"\u0625\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"input",9,1),e.\u0275\u0275twoWayListener("ngModelChange",function(s){return e.\u0275\u0275restoreView(a),e.\u0275\u0275twoWayBindingSet(o.formModel.userName,s)||(o.formModel.userName=s),e.\u0275\u0275resetView(s)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,F,2,0,"small",10)(11,W,2,0,"small",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",7)(13,"label",11),e.\u0275\u0275text(14,"\u0643\u0644\u0645\u0629 \u0627\u0644\u0633\u0631"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p-password",12,2),e.\u0275\u0275twoWayListener("ngModelChange",function(s){return e.\u0275\u0275restoreView(a),e.\u0275\u0275twoWayBindingSet(o.formModel.password,s)||(o.formModel.password=s),e.\u0275\u0275resetView(s)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(17,L,2,0,"small",10)(18,P,2,0,"small",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",7)(20,"label",13),e.\u0275\u0275text(21,"\u0646\u0648\u0639 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"p-dropdown",14,3),e.\u0275\u0275twoWayListener("ngModelChange",function(s){return e.\u0275\u0275restoreView(a),e.\u0275\u0275twoWayBindingSet(o.formModel.userType,s)||(o.formModel.userType=s),e.\u0275\u0275resetView(s)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(24,D,2,0,"small",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(25,"button",15),e.\u0275\u0275elementStart(26,"a",16),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(o.openRegisterDialog())}),e.\u0275\u0275text(27,"\u0647\u0644 \u0646\u0633\u064a\u062a \u0643\u0644\u0645\u0629 \u0627\u0644\u0633\u0631\u061f"),e.\u0275\u0275elementEnd()()()}if(2&t){const a=e.\u0275\u0275reference(2),i=e.\u0275\u0275reference(9),s=e.\u0275\u0275reference(16),C=e.\u0275\u0275reference(23);e.\u0275\u0275advance(8),e.\u0275\u0275twoWayProperty("ngModel",o.formModel.userName),e.\u0275\u0275advance(2),e.\u0275\u0275conditional(null!=i.errors&&i.errors.required?10:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(null!=i.errors&&i.errors.minlength?11:-1),e.\u0275\u0275advance(4),e.\u0275\u0275property("feedback",!1)("toggleMask",!0),e.\u0275\u0275twoWayProperty("ngModel",o.formModel.password),e.\u0275\u0275property("minlength",3)("maxlength",22)("inputStyle",e.\u0275\u0275pureFunction0(15,x)),e.\u0275\u0275advance(2),e.\u0275\u0275conditional(null!=s.errors&&s.errors.required?17:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(null!=s.errors&&s.errors.minlength?18:-1),e.\u0275\u0275advance(4),e.\u0275\u0275property("options",o.userTypes),e.\u0275\u0275twoWayProperty("ngModel",o.formModel.userType),e.\u0275\u0275advance(2),e.\u0275\u0275conditional(null!=C.errors&&C.errors.required?24:-1),e.\u0275\u0275advance(),e.\u0275\u0275property("disabled",a.invalid)}},dependencies:[w.CommonModule,m.FormsModule,m.\u0275NgNoValidate,m.DefaultValueAccessor,m.NgControlStatus,m.NgControlStatusGroup,m.RequiredValidator,m.MinLengthValidator,m.MaxLengthValidator,m.NgModel,m.NgForm,g.InputTextModule,g.InputText,h.PasswordModule,h.Password,f.DropdownModule,f.Dropdown,M.ButtonModule,M.ButtonDirective,I.MessageModule,v.ToastModule,b.DialogModule,N.ProgressSpinnerModule],styles:[".form[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background-color:#f0f2f5;padding:20px}.forgot-password[_ngcontent-%COMP%]{cursor:pointer}.toast-center-center[_ngcontent-%COMP%]{position:fixed;top:50%!important;left:50%!important;transform:translate(-50%,-50%)!important;margin:0!important;z-index:999999!important}form[_ngcontent-%COMP%]{width:100%;max-width:400px;background:#fff;padding:2rem;border-radius:8px;box-shadow:0 4px 12px #0000001a;direction:rtl}.input2[_ngcontent-%COMP%]{width:100%;margin-bottom:1.5rem}.input2[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:600}.p-error[_ngcontent-%COMP%]{display:block;color:#d32f2f;font-size:.9rem;font-weight:500;margin-top:.5rem}button[type=submit][_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1rem;font-weight:700;border:none;border-radius:4px;margin-top:1rem;transition:background-color .3s ease;text-transform:uppercase}.spinner-overlay[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:200px;background:#ffffffe6;border-radius:10px;padding:1rem}.loading-text[_ngcontent-%COMP%]{margin-top:1rem;font-size:1.2rem;color:#333;font-weight:500}a[_ngcontent-%COMP%]{display:block;text-align:center;margin-top:1rem;text-decoration:none;font-weight:700}a[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width: 600px){form[_ngcontent-%COMP%]{padding:1.5rem}}.btn-custom[_ngcontent-%COMP%]{background-color:#198754!important;color:#fff!important;border:1px solid #28a745!important;transition:all .3s ease}.btn-custom[_ngcontent-%COMP%]:hover{background-color:#21943c!important;border:1px solid #28a745!important}"]})}return n})()}}]);